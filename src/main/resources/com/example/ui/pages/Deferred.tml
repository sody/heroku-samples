<html t:type="layout"
      xmlns:t="http://tapestry.apache.org/schema/tapestry_5_1_0.xsd">


<div class="row">
    <div class="span6">
        <h4>Without RenderDeferred mixin</h4>
        <br/>
        <t:actionlink t:id="updateLeft" zone="prop:leftZoneId"
                      rel="tooltip" title="zone=${prop:leftZoneId}" class="btn">
            ${message:label.update}
        </t:actionlink>
        <br/><br/>
        <t:zone t:id="leftZone">
            <div class="hero-unit">
                <p>${message:message.help-text}</p>

                <p>${leftContent}</p>
            </div>
        </t:zone>
    </div>

    <div class="span6">
        <h4>With RenderDeferred mixin</h4>
        <br/>
        <t:actionlink t:id="updateRight" zone="prop:rightZoneId" t:mixins="RenderDeferred"
                      rel="tooltip" title="zone=${prop:rightZoneId}" class="btn">
                      ${message:label.update}
        </t:actionlink>
        <br/><br/>
        <t:zone t:id="rightZone">
            <div class="hero-unit">
                <p>${message:message.help-text}</p>

                <p>${rightContent}</p>
            </div>
        </t:zone>
    </div>
</div>

<div class="row">
    <div class="span12">
        <h2>${message:message.source-code}</h2>
    </div>
    <div class="span6">
        <div>
            <a class="btn btn-link" href="#leftDemo1" data-toggle="collapse">Deferred.tml</a>
            <div id="leftDemo1" class="collapse in">
            <pre class="prettyprint linenums">
&lt;t:actionlink t:id="updateLeft"
              zone="prop:leftZoneId"
              class="btn"&gt;
    <t:outputraw value="literal:$"/>{message:label.update}
&lt;/t:actionlink&gt;
&lt;br/&gt;&lt;br/&gt;
&lt;t:zone t:id="leftZone"&gt;
    &lt;div class="hero-unit"&gt;
        &lt;p&gt;<t:outputraw value="literal:$"/>{message:message.help-text}&lt;/p&gt;
        &lt;p&gt;<t:outputraw value="literal:$"/>{leftContent}&lt;/p&gt;
    &lt;/div&gt;
&lt;/t:zone&gt;
            </pre>
            </div>
        </div>
        <div>
            <a class="btn btn-link collapsed" href="#leftDemo2" data-toggle="collapse">Deferred.java</a>
            <div id="leftDemo2" class="collapse fade">
            <pre class="prettyprint linenums">
public class Deferred extends BasePage {

    @InjectComponent
    private Zone leftZone;

    @Property
    private String leftContent;

    @Persist
    private int leftTimes;

    public String getLeftZoneId() {
        return leftZone.getClientId();
    }

    @OnEvent(component = "updateLeft")
    Object updateLeftContent() {
        leftContent = format("message.content-text", ++leftTimes);
        return leftZone;
    }
}

            </pre>
            </div>
        </div>
    </div>

    <div class="span6">
        <div>
            <a class="btn btn-link" href="#rightDemo1" data-toggle="collapse">Deferred.tml</a>
            <div id="rightDemo1" class="collapse in">
            <pre class="prettyprint linenums">
&lt;t:actionlink t:id="updateRight"
              t:mixins="RenderDeferred"
              zone="prop:rightZoneId"
              class="btn"&gt;
    <t:outputraw value="literal:$"/>{message:label.update}
&lt;/t:actionlink&gt;
&lt;br/&gt;&lt;br/&gt;
&lt;t:zone t:id="rightZone"&gt;
    &lt;div class="hero-unit"&gt;
        &lt;p&gt;<t:outputraw value="literal:$"/>{message:message.help-text}&lt;/p&gt;
        &lt;p&gt;<t:outputraw value="literal:$"/>{rightContent}&lt;/p&gt;
    &lt;/div&gt;
&lt;/t:zone&gt;
            </pre>
            </div>
        </div>
        <div>
            <a class="btn btn-link collapsed" href="#rightDemo2" data-toggle="collapse">Deferred.java</a>
            <div id="rightDemo2" class="collapse">
            <pre class="prettyprint linenums">
public class Deferred extends BasePage {

    @InjectComponent
    private Zone rightZone;

    @Property
    private String rightContent;

    @Persist
    private int rightTimes;

    public String getRightZoneId() {
        return rightZone.getClientId();
    }

    @OnEvent(component = "updateRight")
    Object updateRightContent() {
        rightContent = format("message.content-text", ++rightTimes);
        return rightZone;
    }
}
            </pre>
            </div>
        </div>
    </div>
</div>
</html>
